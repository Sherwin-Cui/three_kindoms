# 草船借箭游戏 - 界面组件完整文档

## 📋 文档说明
此文档记录了游戏中所有的界面组件，包括主界面元素、事件UI、道具系统和动态组件，用于UI统一改造。

**设计原则：**
- 16:9竖屏布局，限制在450px最大宽度内
- 极简黑白灰配色：白色背景、灰色文字、黑色交互元素
- 统一的8px圆角、1px边框、极简按钮样式
- 所有弹窗使用 `position: absolute` 限制在游戏容器内

**更新时间：** 2025-08-21
**游戏架构：** ES6模块化，基于AI驱动的文字冒险游戏

---

## 🎮 主界面组件

### 1. 游戏容器 (Game Container)
- **文件位置**: `index.html`, `css/style.css`
- **类名**: `.game-container`
- **状态**: ✅ 已统一
- **描述**: 16:9竖屏主容器，450px最大宽度，100vh高度

### 2. 标题头部 (Header)
- **文件位置**: `index.html`, `css/style.css`
- **元素**: `header h1`
- **状态**: ✅ 已统一
- **描述**: 游戏标题，极简字体，动态更新章节信息

### 3. 状态栏容器 (Status Items Row)
- **文件位置**: `index.html`, `css/style.css`
- **类名**: `.status-items-row`
- **状态**: ✅ 已统一
- **描述**: 状态项隐形容器，控制一行布局，无视觉样式

### 4. 状态卡片 (Status Items)
- **文件位置**: `index.html`, `css/style.css`
- **类名**: `.status-item`
- **状态**: ✅ 已统一
- **子项目**:
  - 第一章状态: `.chapter1-status` (周瑜猜忌、鲁肃信任)
  - 第二章状态: `.chapter2-status` (准备进度) 
  - 第三章状态: `.chapter3-status` (危险等级、士兵士气、船只损失、箭支数量)
  - 通用状态: 时间进度 (`#time-progress`)
- **描述**: 白底灰边框卡片，章节动态显示

### 5. 角色头像区 (Character Avatars)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#character-avatars`
- **状态**: ✅ 已统一
- **子组件**:
  - 角色头像: `.character-avatar` (诸葛亮、周瑜、鲁肃、甘宁)
  - 头像容器: `.avatar-container`
  - 角色名称: `.character-name`
  - 模式切换按钮: `#mode-toggle-btn` (历史/AVG模式)
- **描述**: 网格布局，章节动态显示，包含模式切换功能

### 6. 对话区域 (Dialogue Area)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#dialogue-area`
- **状态**: ✅ 已统一
- **描述**: 历史模式主要对话显示区，隐藏滚动条，浅灰背景

### 7. AVG对话区域 (AVG Dialogue Area)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#avg-dialogue-area`
- **状态**: ✅ 已统一
- **描述**: AVG模式对话显示区，只显示最新消息，默认隐藏

### 8. 输入区域 (Input Area)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#input-area`
- **状态**: ✅ 已统一
- **子组件**:
  - 玩家输入框: `#player-input`
  - 道具按钮: `#items-btn`
  - 发送按钮: `#send-btn`
- **描述**: 底部固定输入区域，三元素横向布局

### 9. 选中道具标签 (Selected Item Tag)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#selected-item-tag`
- **状态**: ✅ 已统一
- **子组件**:
  - 道具文本: `.selected-item-text`
  - 道具名称: `#selected-item-name`
  - 取消按钮: `.cancel-item-btn`
- **描述**: 道具选择提示标签，浅灰色系

### 10. 加载屏幕 (Loading Screen)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#loading`
- **状态**: ✅ 已统一
- **子组件**:
  - 加载旋转器: `.loading-spinner`
  - 提示文本: `p`
- **描述**: 全屏加载遮罩，灰色旋转动画

---

## 🪟 二级窗口和模态框

### 1. 道具选择模态框 (Items Modal)
- **文件位置**: `js/main.js`, `css/style.css`
- **类名**: `.items-modal`, `.items-modal-content`
- **状态**: ✅ 已统一
- **功能**: 道具选择和详情查看
- **布局**: 左侧道具列表 + 右侧详情展示
- **尺寸**: 95%宽度，最大420px，80%高度

### 2. 角色信息弹窗 (Character Info Overlay)
- **文件位置**: `js/ui/uiManager.js`, `css/style.css`
- **类名**: `.character-info-overlay`, `.character-info-dialog`
- **状态**: ✅ 已统一
- **功能**: 显示角色详细信息
- **尺寸**: 70%宽度，70%高度

### 3. 事件对话框 (Event Dialog)
- **文件位置**: `js/ui/uiManager.js` (内联样式)
- **类名**: `.event-overlay`, `.event-dialog`
- **状态**: ✅ 已统一
- **功能**: 显示各种游戏事件
- **子类型**:
  - 对话事件 (dialogue_event)
  - 检定事件 (check_event)  
  - 选择事件 (choice_event)
- **尺寸**: 80%宽度，70%最大高度

### 4. 道具获得弹窗 (Item Gained Dialog)
- **文件位置**: `js/ui/uiManager.js` (内联样式)
- **类名**: `.item-gained-overlay`, `.item-gained-dialog`
- **状态**: ✅ 已统一
- **功能**: 显示获得新道具通知
- **尺寸**: 85%宽度，最大300px

### 5. 章节转换弹窗 (Chapter Transition)
- **文件位置**: `js/ui/uiManager.js` (内联样式)
- **类名**: `.chapter-transition-overlay`
- **状态**: ✅ 已统一
- **功能**: 章节切换动画和信息
- **尺寸**: 最大320px宽度

### 6. 确认对话框 (Confirm Dialog)
- **文件位置**: `js/ui/uiManager.js`, `css/style.css`
- **类名**: `.dialog-overlay`, `.confirm-dialog`
- **状态**: ✅ 已统一
- **功能**: 确认操作弹窗
- **尺寸**: 60%宽度，最大300px

### 7. 加载屏幕 (Loading Screen)
- **文件位置**: `index.html`, `css/style.css`
- **ID**: `#loading`
- **状态**: ⚠️ 需检查
- **功能**: AI思考中显示

---

## 🎨 UI组件细分

### 按钮组件
- **主要按钮**: `.modal-btn.primary` - 黑底白字
- **次要按钮**: `.modal-btn.secondary` - 白底黑字
- **道具按钮**: `#items-btn` - 浅灰底白字
- **发送按钮**: `#send-btn` - 黑底白字
- **取消按钮**: `.cancel-item-btn` - 灰色×按钮
- **模式切换按钮**: `#mode-toggle-btn` - 浅灰底，动态文本

### 卡片组件
- **状态卡片**: `.status-item` - 白底灰边框
- **道具卡片**: `.item-card` - 白底，选中时灰底
- **对话消息**: `.dialogue-message` - 包含头像和内容区域
- **详情卡片**: `.item-detail-info` - 浅灰底

### 对话消息子组件
- **对话头像**: `.dialogue-avatar` - 圆形灰底白字
- **对话内容**: `.dialogue-content` - 白底内容区
- **系统消息**: `.dialogue-message.system` - 纯文本样式
- **NPC消息**: `.dialogue-message.npc` - 带头像样式
- **玩家消息**: `.dialogue-message.player` - 带头像样式

### 头像相关组件
- **角色头像**: `.character-avatar` - 方形灰底，包含头像和名称
- **头像容器**: `.avatar-container` - 显示角色名字首字
- **角色名称**: `.character-name` - 小字号角色名

### 输入相关组件
- **文本输入框**: `#player-input` - 白底灰边框，圆角样式
- **道具标签文本**: `.selected-item-text` - 浅灰底显示选中道具
- **道具名称显示**: `#selected-item-name` - 动态更新道具名

### 状态值组件
- **数值标签**: `.status-item .label` - 小字号灰色标签
- **数值显示**: `.status-item .value` - 粗体数值显示
- **颜色状态**: `.value-low`, `.value-medium`, `.value-high` - 根据数值动态着色

### 交互元素
- **关闭按钮**: 各种模态框的 `×` 按钮 - 右上角灰色
- **事件选择按钮**: 事件弹窗中的选择按钮 - 全宽浅灰底
- **确认按钮**: 各种弹窗的确认按钮 - 黑底白字

---

## 🚀 JavaScript动态创建组件

这些组件完全由JavaScript动态创建，在`js/ui/UIManager.js`中使用内联样式定义：

### 1. AI思考气泡 (AI Thinking Bubble)
- **历史模式**: `#ai-thinking-bubble` (`.dialogue-item.ai-thinking`)
- **AVG模式**: `#avg-ai-thinking-bubble` (`.avg-thinking-only`)
- **子组件**: `.thinking-dots` - 三个动画点
- **状态**: ✅ 已统一 - 浅灰底，无蓝色元素

### 2. 数值变化动画 (Value Change Animation)
- **类名**: `.value-change`
- **功能**: 显示数值增减动画效果
- **样式**: 绝对定位，淡出上升动画
- **状态**: ✅ 已统一 - 纯灰色系

### 3. 模态框遮罩 (Modal Overlays)
所有模态框都使用相同的遮罩样式：
- **样式**: `position: absolute; background: rgba(0, 0, 0, 0.5)`
- **约束**: 限制在游戏容器内，不超出16:9框架

### 4. 动态表单元素
- **单选按钮组**: 检定事件中的道具选择
- **标签容器**: 道具选择的label元素
- **动态按钮**: 事件触发的各种操作按钮

### 5. 章节转换动画元素
- **章节背景切换**: 基于事件触发的背景变更
- **过渡动画**: 章节切换时的视觉效果
- **状态指示**: 章节进度和事件完成状态

### 6. 实时更新组件
- **角色属性显示**: 实时反映当前游戏状态
- **事件状态标记**: 成功/失败标识
- **道具可用性**: 动态显示可用道具列表

---

## ✅ 已完成检查和修复

### 已修复的组件：

1. **角色信息框宽度问题** ✅ - 从70%改为90%，最大320px
2. **角色头像渐变背景** ✅ - 移除蓝紫色渐变，改为浅灰底+灰边框
3. **对话消息样式** ✅ - 移除蓝色/绿色背景，统一为灰色系
4. **按钮颜色** ✅ - 发送按钮改为黑底，道具按钮改为浅灰底
5. **加载动画** ✅ - 移除白色动画，改为灰色loading转圈
6. **选中道具标签** ✅ - 移除绿色背景/边框，改为浅灰系
7. **AI思考气泡** ✅ - 移除蓝色背景，改为浅灰底
8. **角色信息弹窗内部样式** ✅ - 移除所有棕色/蓝色/紫色元素

### 已验证的功能：
1. ✅ 所有弹窗都限制在16:9框架内（使用absolute定位）
2. ✅ 滚动条都已隐藏
3. ✅ 字体大小统一为0.8-1.2em范围
4. ✅ 按钮尺寸适合触摸操作

---

## 📱 响应式设计规范

### 断点设置：
- **手机**: ≤ 480px
- **中等屏幕**: 481px - 768px  
- **主容器**: 最大450px宽度

### 通用尺寸规范：
- **边框**: 1px solid #ccc / #dee2e6
- **圆角**: 4px-8px
- **间距**: 8px, 12px, 16px, 20px
- **字体**: 系统字体，0.8em-1.3em
- **阴影**: 0 4px 8px rgba(0,0,0,0.2)

---

## 📊 组件统计总览

### 主界面组件: 10个
1. 游戏容器、2. 标题头部、3. 状态栏容器、4. 状态卡片、5. 角色头像区
6. 对话区域、7. AVG对话区域、8. 输入区域、9. 选中道具标签、10. 加载屏幕

### 二级窗口和模态框: 7个
1. 道具选择模态框、2. 角色信息弹窗、3. 事件对话框、4. 道具获得弹窗
5. 章节转换弹窗、6. 确认对话框、7. 加载屏幕

### 细分UI组件: 6大类
1. 按钮组件(6种)、2. 卡片组件(4种)、3. 对话消息子组件(5种)
4. 头像相关组件(3种)、5. 输入相关组件(3种)、6. 状态值组件(3种)、7. 交互元素(3种)

### JavaScript动态组件: 6大类
1. AI思考气泡、2. 数值变化动画、3. 模态框遮罩、4. 动态表单元素
5. 章节转换动画元素、6. 实时更新组件

**总计: 约50+个可独立改造的UI组件和元素**

## 🔄 更新记录

- **2024-12-19**: 创建文档，统一了主要模态框样式
- **2024-12-19**: 完成所有组件检查，移除所有彩色元素，实现完全极简黑白灰设计
- **2025-08-20**: 全面更新文档，详细列出所有可改造组件，包含动态创建的元素
- **✅ 已完成**: 检查并统一了所有界面元素，包括所有二级和三级窗口，无遗漏项目

---

**备注**: 此文档详细记录了游戏中所有可进行UI改造的组件和元素，包括静态HTML元素、CSS样式类、以及JavaScript动态创建的界面元素。涵盖了主界面、所有模态框、弹窗以及动态生成的组件，确保UI统一改造时不会遗漏任何元素。